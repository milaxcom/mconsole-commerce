DiscountsTable=function(){this.template=$(".discount-template"),this.discounts=$(".discounts"),this.input=$('input[name="discounts"]'),this.add=$(".append-discount"),this.remove=$(".remove-discount"),this.init()},DiscountsTable.prototype.init=function(){if(this.input.val().length>0){var t=JSON.parse(this.input.val());for(var i in t)this.appendItem(null,t[i])}this.add.on("click",this.appendItem.bind(this)),$(document).on("click",".remove-discount",this.removeItem.bind(this))},DiscountsTable.prototype.appendItem=function(t,i){var s=this.template.clone();s.removeClass("discount-template"),s.addClass("discount-item"),s.appendTo(this.discounts),s.on("keyup",this.serialize.bind(this)),i&&(s.find("input").eq(0).val(i.sum),s.find("input").eq(1).val(i.discount)),s.removeClass("hide")},DiscountsTable.prototype.removeItem=function(t){var i=$(t.target);i.closest(".discount-item").remove(),this.serialize()},DiscountsTable.prototype.serialize=function(){var t=[],i=this.discounts.find(".discount-item");i.map(function(i,s){t.push({sum:$(s).find("input").eq(0).val()||0,discount:$(s).find("input").eq(1).val()||0})}),this.input.val(JSON.stringify(t))};